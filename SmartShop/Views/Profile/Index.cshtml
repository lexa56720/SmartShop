@using Microsoft.AspNetCore.Html

@{
    Order[] Orders = ViewBag.Orders;
}

<div class="tab">
    <button class="tablinks" onclick="openTab(event, 'currentOrders')" id="defaultOpen">Current Orders</button>
    <button class="tablinks" onclick="openTab(event, 'completedOrders')">Completed Orders</button>
</div>

<div id="currentOrders" class="tabcontent">
    @foreach (var order in Orders)
    {
        @if (order.Status != OrderStatus.Completed)
        {
            <div class="order-card">
                <h4>Order ID: @order.Code</h4>
                <h5>Order Date: @order.OrderDate.ToLocalTime().ToString("dddd, dd MMMM yyyy, HH:mm")</h5>
                <ul>
                   @foreach(var phone in order.Smartphones)
                    {
                        <li>@phone.Name  $@phone.Price</li>
                    }
                    
                </ul>
                <p>Status: @order.Status.ToString()</p>
                <div class="status-bar">
                    <div class="status-marker @order.Status.ToString().ToLower()"></div>
                </div>
            </div>
        }
    }
</div>

<div id="completedOrders" class="tabcontent">
    @foreach (var order in Orders)
    {
        @if (order.Status == OrderStatus.Completed)
        {
            <div class="order-card">
                <h4>Order ID: @order.Code</h4>
                <h5>Order Date: @order.OrderDate.ToLocalTime().ToString("dddd, dd MMMM yyyy, HH:mm")</h5>
                <ul>
                    @foreach (var phone in order.Smartphones)
                    {
                        <li>@phone.Name  $@phone.Price</li>
                    }

                </ul>
                <p>Status: @order.Status.ToString()</p>
                <div class="status-bar">
                    <div class="status-marker @order.Status.ToString().ToLower()"></div>
                </div>
            </div>
        }
    }
</div>

<style>
    .order-card {
        border: 1px solid #ccc;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 5px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .status-bar {
        height: 20px;
        background-color: #f0f0f0;
        border-radius: 5px;
        margin-top: 10px;
        overflow: hidden;
    }

    .status-marker {
        height: 100%;
        transition: width 0.3s ease-in-out;
    }

    /* Status-specific colors */
    .ordered {
        width: 25%;
        background-color: #ffc107;
    }

    .shipping {
        width: 50%;
        background-color: #17a2b8;
    }

    .arrived {
        width: 75%;
        background-color: #28a745;
    }

    .completed {
        width: 100%;
        background-color: #007bff;
    }
</style>

<script>
    function openTab(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }

        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }


    document.getElementById("defaultOpen").click();
</script>